<ResourceDictionary xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:content="using:SukiUI.Content"
    xmlns:controls="using:ModManager.Controls"
    xmlns:materialIcons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
    xmlns:sukiControl="using:SukiUI.Controls">
	<Design.PreviewWith>
		<Grid Width="500" Height="200" Background="DarkGray">
			<controls:IconExpander HorizontalAlignment="Center" VerticalAlignment="Center" ExpandDirection="Right">
				<controls:IconExpander.Icon>
					<Image Width="16" Height="16" Source="{SvgImage /Assets/Icons/nexuslogo.svg}" />
				</controls:IconExpander.Icon>
				<TextBlock Text="Test hello" />
			</controls:IconExpander>
		</Grid>
	</Design.PreviewWith>
	<ControlTheme x:Key="{x:Type controls:IconExpander}" TargetType="controls:IconExpander">
		<Setter Property="TextBlock.TextAlignment" Value="Start" />
		<Setter Property="ClipToBounds" Value="False" />
		<Setter Property="CornerRadius" Value="4" />
		<Setter Property="ContentTransition" Value="{x:Null}" />
		<Setter Property="Template">
			<ControlTemplate>
				<Border Name="PART_RootBorder"
				    Background="{TemplateBinding Background}"
				    BorderBrush="{TemplateBinding BorderBrush}"
				    BorderThickness="{TemplateBinding BorderThickness}"
				    CornerRadius="{TemplateBinding CornerRadius}">
					<Border Name="PART_InnerBorder" CornerRadius="{TemplateBinding CornerRadius}">
						<Panel>
							<sukiControl:ContentExpandControl Name="PART_ContentExpand"
							    HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
							    VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
							    Content="{TemplateBinding Content}"
							    ContentTemplate="{TemplateBinding ContentTemplate}" />

							<LayoutTransformControl Name="PART_ToggleTransform">
								<DockPanel>
									<ToggleButton Name="PART_ToggleButton"
									    Padding="0"
									    HorizontalAlignment="Stretch"
									    VerticalAlignment="Center"
									    HorizontalContentAlignment="Stretch"
									    Background="Transparent"
									    BorderBrush="{DynamicResource SukiBorderBrush}"
									    BorderThickness="0"
									    DockPanel.Dock="Right"
									    IsChecked="{TemplateBinding IsExpanded, Mode=TwoWay}">
										<Grid ColumnDefinitions="Auto,*,Auto">
											<ContentPresenter Grid.Column="0"
											    HorizontalAlignment="Left"
											    VerticalAlignment="Center"
											    Content="{TemplateBinding Header}"
											    FontWeight="DemiBold" />
											<ContentPresenter Name="PART_Icon"
											    Grid.Column="2"
											    Margin="0"
											    Content="{TemplateBinding Icon}" />
											<!--<Image Width="16" Height="16" Source="{SvgImage /Assets/Icons/nexuslogo.svg}" />-->
										</Grid>
									</ToggleButton>
								</DockPanel>
							</LayoutTransformControl>
						</Panel>
					</Border>
				</Border>
			</ControlTemplate>
		</Setter>

		<Style Selector="^:not(.no-transitions) /template/ sukiControl|ContentExpandControl#PART_ContentExpand">
			<Setter Property="Transitions">
				<Transitions>
					<DoubleTransition Easing="CircularEaseOut" Property="Multiplier" Duration="0.25" />
				</Transitions>
			</Setter>
		</Style>

		<Style Selector="^ /template/ Border#PART_InnerBorder">
			<Setter Property="ClipToBounds" Value="True" />
		</Style>

		<Style Selector="^ /template/ LayoutTransformControl#PART_ToggleTransform">
			<Setter Property="ClipToBounds" Value="False" />
		</Style>

		<Style Selector="^ /template/ sukiControl|ContentExpandControl#PART_ContentExpand">
			<Setter Property="Multiplier" Value="0" />
		</Style>

		<Style Selector="^:expanded /template/ sukiControl|ContentExpandControl#PART_ContentExpand">
			<Setter Property="Multiplier" Value="1" />
		</Style>

		<!--  Hide the tooltip when pressed  -->
		<Style Selector="^ /template/ ToggleButton#PART_ToggleButton:pressed">
			<Setter Property="ToolTip.Tip" Value="{x:Null}" />
		</Style>

		<Style Selector="^ /template/ ToggleButton:checked">
			<Setter Property="Background" Value="Transparent" />
		</Style>

		<Style Selector="^:up">
			<Style Selector="^ /template/ sukiControl|ContentExpandControl#PART_ContentExpand">
				<Setter Property="Orientation" Value="Vertical" />
				<Setter Property="VerticalAlignment" Value="Bottom" />
				<Setter Property="Margin" Value="0,0,0,32" />
			</Style>

			<Style Selector="^ /template/ LayoutTransformControl#PART_ToggleTransform">
				<Setter Property="VerticalAlignment" Value="Bottom" />
			</Style>
		</Style>

		<Style Selector="^:down">
			<Style Selector="^ /template/ sukiControl|ContentExpandControl#PART_ContentExpand">
				<Setter Property="Orientation" Value="Vertical" />
				<Setter Property="VerticalAlignment" Value="Top" />
				<Setter Property="Margin" Value="0,32,0,0" />
			</Style>

			<Style Selector="^ /template/ LayoutTransformControl#PART_ToggleTransform">
				<Setter Property="VerticalAlignment" Value="Top" />
			</Style>
		</Style>

		<Style Selector="^:left">
			<Style Selector="^ /template/ sukiControl|ContentExpandControl#PART_ContentExpand">
				<Setter Property="Orientation" Value="Horizontal" />
				<Setter Property="HorizontalAlignment" Value="Right" />
				<Setter Property="Margin" Value="0,0,32,0" />
			</Style>

			<Style Selector="^ /template/ LayoutTransformControl#PART_ToggleTransform">
				<!--<Setter Property="LayoutTransform" Value="rotate(90deg)" />-->
				<Setter Property="HorizontalAlignment" Value="Right" />
			</Style>
		</Style>

		<Style Selector="^:right">
			<Style Selector="^ /template/ sukiControl|ContentExpandControl#PART_ContentExpand">
				<Setter Property="Orientation" Value="Horizontal" />
				<Setter Property="HorizontalAlignment" Value="Left" />
				<Setter Property="Margin" Value="32,0,0,0" />
			</Style>

			<Style Selector="^ /template/ LayoutTransformControl#PART_ToggleTransform">
				<!--<Setter Property="LayoutTransform" Value="rotate(90deg)" />-->
				<Setter Property="HorizontalAlignment" Value="Left" />
			</Style>
		</Style>
	</ControlTheme>
</ResourceDictionary>